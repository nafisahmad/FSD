//10>public>index.html, success.html
//10>kl.js

//index.html

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup Form - MongoDB</title>
  </head>
  <body>
    <form action="success" method="POST">
      <h2>SignUp Form</h2>
      <input type="text" name="name" placeholder="Name" required /> <br />
      <input type="email" name="email" placeholder="Email" required /> <br />
      <input type="number" name="phone" placeholder="Mobile" required /> <br />
      <input type="password" name="password" placeholder="Password" required />
      <br />
      <input type="submit" value="Submit" id="submit" />
    </form>
  </body>
</html>

//successs.html

<!DOCTYPE html>
<html>
  <head>
    <title>Signup Form</title>
  </head>
  <body>
    <h1>Signup Successful</h1>
  </body>
</html>

//kl.js

var express = require("express");
var bodyParser = require("body-parser");
var MongoClient = require("mongodb").MongoClient;
var app = express();
app.use(express.static("public"));
app.use(bodyParser.urlencoded({ extended: true }));
var url = "mongodb://localhost:27017/";
var dbo;
MongoClient.connect(url, function (err, database) {
  if (err) throw err;
  dbo = database.db("signup1");
});
app.post("/success", function (req, res) {
  var name = req.body.fn;
  var email = req.body.email;
  var pass = req.body.password;
  var phone = req.body.phno;
  var data = { name: name, email: email, password: pass, phone: phone };
  dbo.collection("users").insertOne(data, function (err, collection) {
    if (err) throw err;
    console.log("Record inserted Successfully");
  });
  return res.redirect("success.html");
});
app
  .get("/", function (req, res) {
    return res.redirect("index.html");
  })
  .listen(3000);
console.log("server listening at http://localhost:3000/");
